(this["webpackJsonpreward-store"]=this["webpackJsonpreward-store"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(8),s=n.n(i),o=n(10),a=n(23),u=Object(a.b)({apiError:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_ERROR":return t.error;default:return e}},apiLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_LOADING":return t.loading;default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_SUCCESS":return t.products;default:return e}},routeId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECTED_ROUTE":return t.id;default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DATA":return t.data;default:return e}},addPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POINTS":return t.added;default:return e}},redeemProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDEEM_PRODUCT":return t.redeemed;default:return e}},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CATEGORY":return t.category;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ORDER":return t.order;default:return e}},showSuccessModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_SUCCESS_MODAL":return t.showSuccess;default:return e}},showFailureModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_FAILURE_MODAL":return t.showFailure;default:return e}}}),d=n(35),l=function(){return Object(a.c)(u,Object(a.a)(d.a))},h=n(29),j=n(6),f=n(17),b=n(79),O=n.p+"static/media/coin.d31cb904.svg",p=n.p+"static/media/coins.c8ebb511.svg",m=n.p+"static/media/treasure.eededbbf.svg",v=[{img:O,label:"1000",width:70,value:1e3,text:"'Cause you diserve 'em mate!"},{img:p,label:"5000",width:100,value:5e3,text:"Hope you're payin' Black Jacks tonight!"},{img:m,label:"7500",width:100,value:7500,text:"Leave somethin' for the rest of us, Bucko!"}],g=n(1);var x=function(e){var t=e.img,n=e.label,r=e.text,c=e.value,i=e.width,s=e.handleOnClick;return Object(g.jsxs)("div",{className:"add-points-card",children:[Object(g.jsx)("img",{src:t,width:i,alt:"img"}),Object(g.jsxs)("div",{className:"details",children:[Object(g.jsx)("h3",{children:n}),Object(g.jsxs)("p",{children:[" ",r," "]}),Object(g.jsx)("button",{value:c,onClick:s,children:"Add gems"})]})]})};var w=function(e){var t=e.handleOnShow,n=e.show,r=e.handleOnCardClick;return Object(g.jsxs)(b.a,{show:n,onHide:t,size:"lg",dialogClassName:"modal-add-points",children:[Object(g.jsx)(b.a.Header,{closeButton:!0}),Object(g.jsxs)(b.a.Body,{children:[Object(g.jsx)("h2",{children:"Get yourself some free Gems!"}),Object(g.jsx)("div",{className:"cards-container",children:v.map((function(e,t){return Object(g.jsx)(x,{img:e.img,label:e.label,width:e.width,text:e.text,value:e.value,handleOnClick:r},t)}))})]})]})},y=n.p+"static/media/logo.78256b46.svg",E=n.p+"static/media/gem.e5ea73f0.svg";var S=function(e){var t=e.onGetUserData,n=e.addedPoints,c=e.userData,i=e.redeemProduct,s=e.onAddPoints;Object(r.useEffect)((function(){t()}),[n,i]);var o=Object(r.useState)(!1),a=Object(f.a)(o,2),u=a[0],d=a[1];return Object(g.jsxs)("div",{className:"header",children:[Object(g.jsxs)("div",{className:"top",children:[Object(g.jsx)("img",{src:y,width:"190",alt:"logo"}),Object(g.jsxs)("div",{className:"points-container",children:[Object(g.jsxs)("h3",{children:["Ahoy, ",c.name,"!"]}),Object(g.jsxs)("aside",{onClick:function(){return d(!0)},children:[Object(g.jsxs)("p",{children:[" ",c.points," "]}),Object(g.jsx)("img",{src:E,width:"25",alt:"coin"})]})]})]}),Object(g.jsx)(w,{handleOnShow:function(){return d(!1)},handleOnCardClick:function(e){s(e.target.value),d(!1)},show:u})]})},D={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MDk2YjhkMzliNzc4MTAwMjA5YzVhOTIiLCJpYXQiOjE2MjA0OTA0NTF9.7OUMVhpjHbL1WKCVNABJ8qEYEQIHkzqsDp2cObGyu3k"},N="https://coding-challenge-api.aerolab.co",C=function(e){return{type:"API_ERROR",error:e}},P=function(e){return{type:"API_LOADING",loading:e}},A=function(e){return{type:"API_SUCCESS",products:e}},M=function(e){return{type:"REDEEM_PRODUCT",redeemed:e}},I=function(e){return{type:"SHOW_SUCCESS_MODAL",showSuccess:e}},R=function(e){return{type:"SHOW_FAILURE_MODAL",showFailure:e}},_=function(e){return function(t){t(function(e){return{type:"SELECTED_ROUTE",id:e}}(e))}},k=function(){return function(e){e(C(!1)),e(P(!0)),fetch("".concat(N,"/user/me"),{headers:D}).then((function(t){if(!t.ok)throw Error(t.statusText);return e(P(!1)),t})).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"USER_DATA",data:e}}(t))})).catch((function(t){e(C(!0))}))}},G=function(e){return function(t){t(C(!1)),t(P(!0)),fetch("".concat(N,"/user/points"),{headers:D,method:"post",body:JSON.stringify({amount:parseInt(e)})}).then((function(e){if(!e.ok)throw Error(e.statusText);return t(P(!1)),e})).then((function(e){return e.body})).then((function(){return t({type:"ADD_POINTS",added:new Date})})).catch((function(e){t(C(!0))}))}},T=Object(o.b)((function(e,t){return{addedPoints:e.addPoints,userData:e.userData,redeemProduct:e.redeemProduct,products:e.products}}),(function(e,t){return{onGetRouteId:function(t){return e(_(t))},onGetUserData:function(){return e(k())},onAddPoints:function(t){return e(G(t))}}}))(S);var H=function(e){var t=e.title;return Object(g.jsx)("div",{className:"hero-card",id:"hero",children:Object(g.jsxs)("h1",{children:[" ",t," "]})})},U=n.p+"static/media/whiteCoin.86097fa2.svg";var L=function(e){var t=e.id,n=e.title,r=e.img,c=e.price,i=e.userPoints,s=e.handleRedeemProduct;return Object(g.jsxs)("div",{className:"product-card",children:[Object(g.jsx)("img",{src:r,alt:"product-img"}),Object(g.jsxs)("h3",{children:[" ",n," "]}),Object(g.jsxs)("div",{className:"price",children:[Object(g.jsxs)("p",{children:[" ",c," "]}),Object(g.jsx)("img",{src:O,className:"img-coin",alt:"product-img"})]}),i>=c?Object(g.jsx)("button",{value:t,onClick:s,children:"REDEEM"}):Object(g.jsxs)("button",{className:"inactive",value:t,children:[" NEED ",c-i," ",Object(g.jsx)("img",{src:U,width:"20",alt:"product-img"})]})]})};var F=function(e){var t=e.title,n=e.img,r=e.price,c=e.timestamp;return Object(g.jsxs)("div",{className:"history-product-card",children:[Object(g.jsx)("img",{src:n,className:"product-pic",alt:"product-img"}),Object(g.jsxs)("div",{className:"details",children:[Object(g.jsxs)("h3",{children:[" ",t," "]}),Object(g.jsxs)("div",{className:"price",children:[Object(g.jsxs)("h5",{children:[" ",r," "]}),Object(g.jsx)("img",{src:O,width:"20",alt:"product-img"})]}),Object(g.jsxs)("p",{children:[" ",c," "]})]})]})},J=n.p+"static/media/ship.81d06dc8.svg";var B=function(e){var t=e.showModal,n=e.handleHide;return Object(g.jsx)("div",{className:"modal-success",children:Object(g.jsx)(b.a,{show:t,onHide:n,dialogClassName:"modal-success",children:Object(g.jsxs)(b.a.Body,{children:[Object(g.jsx)("img",{src:J,width:"140",alt:"ship"}),Object(g.jsx)("h2",{children:"All Hand Hoy!"}),Object(g.jsx)("p",{children:"Your product's been redeemed successfully."}),Object(g.jsx)("p",{children:"Keep huntin' more treasures!"}),Object(g.jsx)("button",{onClick:n,children:"CLOSE"})]})})})},z=n.p+"static/media/kraken.b2fd91a9.svg";var Y=function(e){var t=e.showModal,n=e.handleHide;return Object(g.jsx)(b.a,{show:t,onHide:n,dialogClassName:"modal-failure",children:Object(g.jsxs)(b.a.Body,{children:[Object(g.jsx)("img",{src:z,width:"140",alt:"kraken"}),Object(g.jsx)("h2",{children:"Shiver Me Timbers!"}),Object(g.jsx)("p",{children:"There's been an error while trying to redeem your product."}),Object(g.jsx)("p",{children:"Maybe try again later, lad!"}),Object(g.jsx)("button",{onClick:n,children:"CLOSE"})]})})};var W=function(e,t){var n=Object(r.useState)(1),c=Object(f.a)(n,2),i=c[0],s=c[1],o=Math.ceil(e.length/t);return{next:function(){s((function(e){return Math.min(e+1,o)}))},prev:function(){s((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);s((function(e){return Math.min(t,o)}))},currentData:function(){var n=(i-1)*t,r=n+t;return e.slice(n,r)},currentPage:i,maxPage:o,setCurrentPage:s}},V=n(78);function Q(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,c=t.getDate(),i=t.getHours(),s=t.getMinutes();return t=c+"/"+r+"/"+n+" - "+i+":"+(s<10?"0":"")+s}var q=function(e){var t=e.onGetProducts,n=e.onGetUserHistory,c=e.products,i=e.routeId,s=e.userData,o=e.onRedeemProduct,a=e.category,u=e.order,d=e.showSuccessModal,l=e.showFailureModal,h=e.onSetShowFailure,j=e.onSetShowSuccess;Object(r.useEffect)((function(){1===i?t():n(),y.setCurrentPage(1)}),[i,a]);var b=""===a?c:c.filter((function(e){return e.category===a})),O="lower-price"===u?b.sort((function(e,t){return e.cost-t.cost})):"higher-price"===u?b.sort((function(e,t){return t.cost-e.cost})):b,p=Object(r.useState)(1),m=Object(f.a)(p,2),v=m[0],x=m[1],w=Math.ceil(O.length/16),y=W(O,16);return Object(g.jsxs)("div",{className:"products-list",children:[1===i?y.currentData().map((function(e,t){return Object(g.jsx)(L,{id:e._id,routeId:i,title:e.name,img:e.img.url,price:e.cost,userPoints:s.points,handleRedeemProduct:function(e){return t=e.target.value,void o(t);var t}},t)})):c.map((function(e,t){return Object(g.jsx)(F,{title:e.name,img:e.img.url,price:e.cost,timestamp:Q(e.createDate)},t)})),Object(g.jsx)(V.a,{count:w,size:"large",page:v,variant:"outlined",shape:"rounded",onChange:function(e,t){x(t),y.jump(t)}}),Object(g.jsx)(B,{showModal:d,handleHide:function(){return j(!1)}}),Object(g.jsx)(Y,{showModal:l,handleHide:function(){return h(!1)}})]})},K=Object(o.b)((function(e,t){return{products:e.products,routeId:e.routeId,userData:e.userData,category:e.category,order:e.order,showSuccessModal:e.showSuccessModal,showFailureModal:e.showFailureModal}}),(function(e,t){return{onGetProducts:function(){return e((function(e){e(C(!1)),e(P(!0)),fetch("".concat(N,"/products"),{headers:D}).then((function(t){if(!t.ok)throw Error(t.statusText);return e(P(!1)),t})).then((function(e){return e.json()})).then((function(t){return e(A(t))})).catch((function(t){e(C(!0))}))}))},onGetUserHistory:function(){return e((function(e){e(C(!1)),e(P(!0)),fetch("".concat(N,"/user/history"),{headers:D}).then((function(t){if(!t.ok)throw Error(t.statusText);return e(P(!1)),t})).then((function(e){return e.json()})).then((function(t){return e(A(t.reverse()))})).catch((function(t){e(C(!0))}))}))},onGetUserData:function(){return e(k())},onRedeemProduct:function(t){return e(function(e){return function(t){t(M(!1)),t(P(!0)),fetch("".concat(N,"/redeem"),{headers:D,method:"post",body:JSON.stringify({productId:e})}).then((function(e){if(!e.ok)throw Error(e.statusText);return t(P(!1)),e})).then((function(e){return e.body})).then((function(){t(I(!0)),t(M(!0))})).catch((function(){return t(R(!0))}))}}(t))},onSetShowSuccess:function(t){return e(function(e){return function(t){t(I(e))}}(t))},onSetShowFailure:function(t){return e(function(e){return function(t){t(R(e))}}(t))}}}))(q),X=n(43),Z=n.p+"static/media/order.6a125d44.svg",$=n.p+"static/media/filter.db78b89f.svg";var ee=function(e){var t=e.products,n=e.onGetCategory,r=e.onGetOrder,c=Object(X.a)(new Set(t.map((function(e){return e.category}))));return Object(g.jsxs)("div",{className:"filters",children:[Object(g.jsxs)("div",{className:"filter-by-category",children:[Object(g.jsxs)("div",{className:"filter-icon",children:[Object(g.jsx)("img",{src:$,width:"25",alt:"filter"}),Object(g.jsx)("p",{children:"Filter"})]}),Object(g.jsxs)("select",{onChange:function(e){n(e.target.value)},children:[Object(g.jsx)("option",{value:"",children:"All products"}),c.map((function(e,t){return Object(g.jsx)("option",{value:e,children:e},t)}))]})]}),Object(g.jsxs)("div",{className:"order-by",children:[Object(g.jsxs)("div",{className:"filter-icon",children:[Object(g.jsx)("img",{src:Z,width:"20",alt:"order"}),Object(g.jsx)("p",{children:"Order by"})]}),Object(g.jsxs)("select",{onChange:function(e){return r(e.target.value)},children:[Object(g.jsx)("option",{value:"",children:"-"}),Object(g.jsx)("option",{value:"lower-price",children:"Lower price"}),Object(g.jsx)("option",{value:"higher-price",children:"Higher price"})]})]})]})},te=Object(o.b)((function(e,t){return{products:e.products}}),(function(e,t){return{onGetCategory:function(t){return e(function(e){return function(t){t(function(e){return{type:"GET_CATEGORY",category:e}}(e))}}(t))},onGetOrder:function(t){return e(function(e){return function(t){t(function(e){return{type:"GET_ORDER",order:e}}(e))}}(t))}}}))(ee);var ne=function(){return Object(g.jsxs)("div",{className:"home",children:[Object(g.jsx)(H,{title:"Rewards"}),Object(g.jsx)(te,{}),Object(g.jsx)(K,{})]})},re=n.p+"static/media/user.78b64d9f.svg";var ce=function(e){var t=e.userData,n=e.routeId,c=e.onGetUserData,i=e.addedPoints;return Object(r.useEffect)((function(){2===n&&c()}),[n,i]),Object(g.jsxs)("div",{className:"user-data",children:[Object(g.jsxs)("div",{className:"user-card",children:[Object(g.jsx)("div",{className:"img-user",children:Object(g.jsx)("img",{src:re,width:"80",alt:"user-pic"})}),Object(g.jsxs)("div",{className:"user-info",children:[Object(g.jsxs)("h1",{children:[" ",t.name," "]}),Object(g.jsxs)("p",{children:[" ",Object(g.jsx)("strong",{children:"Points: "}),t.points," "]})]})]}),Object(g.jsx)("h2",{children:"History"})]})},ie=Object(o.b)((function(e,t){return{userData:e.userData,routeId:e.routeId,addedPoints:e.addedPoints}}),(function(e,t){return{onGetUserData:function(){return e(k())},onAddPoints:function(t){return e(G(t))}}}))(ce);var se=function(){return Object(g.jsxs)("div",{className:"profile",children:[Object(g.jsx)(H,{title:"My Profile"}),Object(g.jsx)(ie,{}),Object(g.jsx)(K,{})]})},oe=[{page_id:1,path:"/",component:ne,label:n.p+"static/media/home.205e5c86.svg"},{page_id:2,path:"/profile",component:se,label:re}];var ae=function(e){var t=e.onGetRouteId;return Object(g.jsx)("div",{className:"menu",children:null===oe||void 0===oe?void 0:oe.map((function(e,n){return Object(g.jsx)(h.b,{to:e.path,onClick:function(){return t(e.page_id)},children:Object(g.jsx)("img",{src:e.label,width:"30",alt:"icon"})},n)}))})},ue=Object(o.b)(null,(function(e,t){return{onGetRouteId:function(t){return e(_(t))}}}))(ae),de=n(41),le=n(42);n(60),n(61);var he=function(){return Object(g.jsx)(h.a,{children:Object(g.jsxs)("div",{className:"App top",children:[Object(g.jsx)(T,{}),Object(g.jsxs)("div",{className:"bottom",children:[Object(g.jsx)(ue,{}),Object(g.jsx)(j.c,{children:oe.map((function(e,t){return Object(g.jsx)(j.a,{exact:!0,path:e.path,component:e.component},t)}))})]}),Object(g.jsx)("a",{href:"#hero",className:"up-button",children:Object(g.jsx)(de.a,{icon:le.a})})]})})},je=l();s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(o.a,{store:je,children:Object(g.jsx)(he,{})})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.d49fada4.chunk.js.map